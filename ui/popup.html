<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Broadcast Message</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Leckerli+One&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link href="lib/bootstrap.min.css" rel="stylesheet">
  <link href="popup.css" rel="stylesheet">
  <script src="lib/jquery.min.js"></script> <!-- Optional for jQuery, not required in Bootstrap 5 -->
  <script src="lib/bootstrap.min.js"></script> <!-- Bootstrap JS -->
</head>
<body class="bg-light p-4 text" style="max-width: 800px;">

  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm rounded mb-4">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img src="logo.png" alt="Logo" width="62" height="53" class="me-2">
        <span class="fs-2 fw-bold title">Broadcast your message</span>
      </a>
      <button class="btn btn-outline-primary" id="settings">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
          <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
          <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
        </svg>
      </button>
    </div>
  </nav>

  <div id="main-content" style="display: none;">
    <ul class="nav nav-tabs mb-3" role="tablist">
      <li class="nav-item ml mx-4 mb-2">
        <button class="btn btn-outline-primary" data-bs-toggle="tab" data-bs-target="#send-message-tab" role="tab">Message</button>
      </li>
      <li class="nav-item">
        <button class="btn btn-outline-primary" data-bs-toggle="tab" data-bs-target="#report-tab" role="tab">Report</button>
      </li>
    </ul>

    
    <!-- Tab content -->
    <div class="tab-content" id="myTabsContent">
      <!-- Send Message Tab -->
      <div id="send-message-tab" class="container tab-pane active">
        <!-- Send Message Tab Content -->
      <div id="send-message">
        <div class="mb-3">
          <textarea id="message" class="form-control" rows="4" placeholder="Enter your message"></textarea>
        </div>
    
        <!-- Schedule Checkbox -->
        <div class="form-check mb-3">
          <input type="checkbox" class="form-check-input" id="enable-schedule">
          <label class="form-check-label" for="enable-schedule">Enable Schedule</label>
        </div>
    
        <!-- Schedule options, hidden by default -->
        <div id="schedule-options" class="d-none mb-3">
          <label for="schedule" class="form-label">Frequency</label>
          <select id="schedule" class="form-select mb-3">
            <option value="0" style="display:none">None</option>
            <option value="1">Daily</option>
            <option value="2">Once in 2 Days</option>
            <option value="3">Once in 3 Days</option>
            <option value="7">Weekly</option>
            <option value="30">Monthly</option>
            <option value="365">Yearly</option>
          </select>
          <label for="time" class="form-label">Time</label>
          <input type="datetime-local" id="datetime" class="form-control mb-3">
        </div>
    
        
    
        <div class="mb-3">
          <label for="sheetType" class="form-label">Select Source</label>
          <div>
            <input type="radio" id="localSheet" name="sheetType" value="local" class="form-check-input" checked>
            <label for="localSheet" class="form-check-label">Local</label>
          </div>
          <div>
              <!-- Radio buttons for selecting Google Sheet or Local Sheet -->
              <input type="radio" id="googleSheet" name="sheetType" value="google" class="form-check-input">
              <label for="googleSheet" class="form-check-label">Cloud(google)</label>
          </div>
        </div>
      
        <!-- Google Sheet Textbox (hidden by default) -->
        <div class="mb-3" id="googleSheetContainer" style="display: none;">
          <label for="googleUrl" class="form-label">Google Sheet URL</label>
          <input type="url" id="googleUrl" class="form-control" placeholder="Enter Google Sheet URL">
        </div>
      
        <!-- Local Sheet File Input (hidden by default) -->
        <div class="mb-3" id="localSheetContainer" style="display: block;">
          <label for="file" class="form-label">Upload File</label>
          <input type="file" id="file" class="form-control" accept=".xlsx">
        </div>
        
        <div class="row">
          <div class="col-12" id="col1">
            <button id="send" class="btn btn-outline-primary w-100 mb-4">Broadcast</button>
          </div>
        </div>
      </div>
        </div>
      <!-- Message Report Tab -->
      <div id="report-tab" class="container tab-pane fade">
        <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
        <!-- Example report output -->
        <table class="table table-striped table-hover text-center">
          <thead class="table-success">
            <tr>
              <th scope="col">Message</th>
              <th scope="col">Status</th>
              <th scope="col">Sent On</th>
            </tr>
          </thead>
          <tbody id="status-tbody">
            <tr>
              <td>Sample message</td>
              <td>Sent</td>
              <td>2024-11-09 14:00</td>
            </tr>
            <!-- Additional rows for report data will go here -->
          </tbody>
        </table>
      </div>
        <button class="btn btn-outline-primary mb-3" id="viewAllBtn">View All</button>
      </div>
      
    </div>
    
    <!-- Modal -->
    <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title title" id="detailsModalLabel">Phone Status Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <table class="table table-striped table-hover text-center">
              <thead class="table-success">
                <tr>
                  <th>Phone Number</th>
                  <th>Status</th>
                  <th>Sent On</th>
                </tr>
              </thead>
              <tbody id="modal-tbody">
                <!-- Dynamic rows will be appended here -->
              </tbody>
            </table>
            
          </div>
          <div class="modal-footer">
            <ul id="modal-pagination-controls" class="pagination justify-content-center">
              <!-- Pagination buttons will be appended here -->
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <div class="toast position-fixed top-0 end-0 p-3" id="bcastToast" role="alert" aria-live="assertive" aria-atomic="true" style="z-index: 11">
      <div class="toast-header">
        <strong class="me-auto">Broadcast Error</strong>
        <small id="toast-timestamp">Just now</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Error scheduling the broadcast. Please contact support team for troubleshooting.
      </div>
    </div>
    </div>
    
    <div id="error-content" style="display: none;">
      <div class="card text-center">
        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
          <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </symbol>
        </svg>
        <div class="alert alert-danger d-flex align-items-center" role="alert">
          <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Warning:"><use xlink:href="#exclamation-triangle-fill"/></svg>
          <div>
            ERROR
          </div>
        </div>
        <div class="card-body">
          <h5 class="card-title title" id="error-title">Extension Reloaded</h5>
          <p class="card-text" id="error-description">It has been noticied that the extension got reloaded and this needs whatsapp to be re-opened in a fresh window or <b>contact support team</b> for assistance.</p>
          <a href="#" class="btn btn-primary" id="error-workaround-button">Establish New Window</a>
        </div>
        <div class="card-footer text-muted" id="error-timestamp">
          2 days ago
        </div>
      </div>
    </div>
    
    <div id="spinner-container">
      <div class="card text-center">
        <div class="card-body">
          <p class="title">Please wait while we check for authentication. Almost done...</p>
          <div class="spinner-grow text-primary" role="status" id="login-check">
            <span class="sr-only"></span>
          </div>
        </div>
        <div class="card-footer text-muted" id="error-timestamp">
        </div>
      </div>
    </div>
    
    
    <!-- Modal -->
    <div class="modal fade" id="settings-form" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header ">
            <button class="btn btn-outline-primary" id="settings">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
                <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
              </svg>
            </button>
            &emsp;
            <h5 class="modal-title fs-2 fw-bold title" id="exampleModalLabel">Settings</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form>
              <!-- Key Input -->
              <div class="mb-3">
                <div class="row">
                  <div class="col-2">
                    <label for="keyInput" class="form-label">Key</label>
                  </div>
                  <div class="col">
                    <textarea class="form-control" id="keyInput" rows="4" placeholder="Enter your key"></textarea>
                  </div>
                </div>
              </div>
              <!-- Chatbox Input -->
              <div class="mb-3">
                <div class="row">
                  <div class="col-2">
                    <label for="inqpathInput" class="form-label">Chatbox Inqpath</label>
                  </div>
                  <div class="col">
                    <input type="text" class="form-control" id="inqpathInput" placeholder="Enter inqpath">
                  </div>
                </div>
              </div>
    
              <!-- Chatbox Input -->
              <div class="mb-3">
                <div class="row">
                  <div class="col-2">
                    <label for="sheetNameInput" class="form-label">Sheet Name</label>
                  </div>
                  <div class="col">
                    <input type="text" class="form-control" id="sheetNameInput" placeholder="Enter sheet name">
                  </div>
                </div>
              </div>
    
              <!-- Chatbox Input -->
              <div class="mb-3">
                <div class="row">
                  <div class="col-2">
                    <label for="browserTimeoutInput" class="form-label">Browser Timeout</label>
                  </div>
                  <div class="col">
                    <input type="text" class="form-control" id="browserTimeoutInput" placeholder="Enter browser timeout">
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" id="save-settings">Save</button>
          </div>
        </div>
      </div>
    </div>
    
    <script src="popup.js"></script>
    

  </body>
</html>
